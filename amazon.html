<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Redirecting to Amazon App...</title>
  <style>body{margin:0;padding:0}</style>
</head>
<body>
<script>
/* ===== CONFIGURE ===== */
const PRODUCT_URL = "https://www.amazon.in/dp/B08N5WRWNW"; // Replace with your product
const AMAZON_PACKAGE = "com.amazon.mShop.android.shopping";

/* ===== ENVIRONMENT CHECK ===== */
const ua = navigator.userAgent || "";
const isAndroid = /Android/i.test(ua);
const isIOS = /iPhone|iPad|iPod/i.test(ua);
const isInstagramiOS = /Instagram/.test(ua) && isIOS;

/* ===== REDIRECT LOGIC ===== */
function redirect() {
  if (isAndroid) {
    // Android intent URL
    try {
      const u = new URL(PRODUCT_URL);
      const hostPath = u.hostname + u.pathname + (u.search || '') + (u.hash || '');
      const fallback = encodeURIComponent(PRODUCT_URL);
      const intentUri = `intent://${hostPath}#Intent;scheme=https;package=${AMAZON_PACKAGE};S.browser_fallback_url=${fallback};end`;
      window.location.href = intentUri;
    } catch(e){
      window.location.href = PRODUCT_URL;
    }
    return;
  }

  if (isIOS) {
    // iOS Universal Link
    // If Instagram webview, open in Safari first
    if (isInstagramiOS) {
      window.location.href = PRODUCT_URL; // _blank usually triggers Safari
    } else {
      // Universal Link (opens app directly)
      window.location.href = PRODUCT_URL;
    }
    return;
  }

  // Desktop fallback
  window.location.href = PRODUCT_URL;
}

/* ===== EXECUTE REDIRECT ===== */
redirect();
</script>
</body>
</html>
