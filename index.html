<script>
const PRODUCT_URL = "https://www.flipkart.com/lg-7-kg-5-star-inverter-direct-drive-technology-6-motion-dd-reduce-germs-allergens-steam-cycles-in-built-heater-touch-panel-fully-automatic-front-load-washing-machine-black-grey/p/itmfb403416d27a3?pid=WMNH7SPNGXDGUKVE&lid=LSTWMNH7SPNGXDGUKVEZAHO0B";
const statusEl = document.getElementById('status');

function isAndroid(){ return /Android/i.test(navigator.userAgent); }
function isIOS(){ return /iPhone|iPad|iPod/i.test(navigator.userAgent); }

function log(msg){ statusEl.innerText = msg; console.log(msg); }

function openFlipkart() {
  if (isAndroid()) {
    const u = new URL(PRODUCT_URL);
    const hostPath = u.hostname + u.pathname + (u.search || '') + (u.hash || '');
    const fallback = encodeURIComponent(PRODUCT_URL);
    const intentUri = `intent://${hostPath}#Intent;scheme=https;package=com.flipkart.android;S.browser_fallback_url=${fallback};end`;
    log("Opening Flipkart app on Android...");
    window.location.href = intentUri;
    return;
  }

  if (isIOS()) {
    // iOS: Use dl.flipkart.com deep link
    const encodedUrl = encodeURIComponent(PRODUCT_URL);
    const deepLink = `https://dl.flipkart.com/dl/${encodedUrl}`;
    log("Opening product via Flipkart deep link...");
    window.location.href = deepLink;
    return;
  }

  // Desktop or unknown
  log("Opening product page in browser...");
  window.location.href = PRODUCT_URL;
}

window.onload = openFlipkart;
</script>
