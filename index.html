<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Open Flipkart App</title>
<style>
body { font-family: system-ui, sans-serif; padding: 18px; }
#log { margin-top:12px; color:#333; white-space:pre-wrap; }
</style>
<!-- Mimic Flipkart Smart App Banner -->
<meta name="apple-itunes-app" content="app-id=836619110, app-argument=https://www.flipkart.com/lg-7-kg-5-star-inverter-direct-drive-technology-6-motion-dd-reduce-germs-allergens-steam-cycles-in-built-heater-touch-panel-fully-automatic-front-load-washing-machine-black-grey/p/itmfb403416d27a3">
</head>
<body>
<h3>Opening Flipkart product...</h3>
<div id="log"></div>

<script>
const FLIPKART_URL = "https://www.flipkart.com/lg-7-kg-5-star-inverter-direct-drive-technology-6-motion-dd-reduce-germs-allergens-steam-cycles-in-built-heater-touch-panel-fully-automatic-front-load-washing-machine-black-grey/p/itmfb403416d27a3";

const logEl = document.getElementById('log');
function log(...args){ logEl.textContent += args.join(' ') + "\n"; console.log(...args); }

function isAndroid(){ return /Android/i.test(navigator.userAgent); }
function isIOS(){ return /iPhone|iPad|iPod/i.test(navigator.userAgent) && !window.MSStream; }
function isInstagram(){ return /Instagram/i.test(navigator.userAgent); }

function openFlipkartApp() {
    if (isInstagram() && isIOS()) {
        log("Instagram iOS detected — opening Safari first...");
        const safariLink = document.createElement('a');
        safariLink.href = FLIPKART_URL;
        safariLink.target = "_blank";
        safariLink.click();
        log("Safari opened — user can now tap to open Flipkart app from there.");
        return;
    }

    if (isAndroid()) {
        log("Android: opening intent URI");
        const u = new URL(FLIPKART_URL);
        const hostPath = u.hostname + u.pathname + (u.search||'') + (u.hash||'');
        const fallback = encodeURIComponent(FLIPKART_URL);
        const intentUri = `intent://${hostPath}#Intent;scheme=https;package=com.flipkart.android;S.browser_fallback_url=${fallback};end`;
        window.location.href = intentUri;
        return;
    }

    if (isIOS()) {
        log("iOS Safari: opening universal link");
        window.location.href = FLIPKART_URL;
        return;
    }

    log("Desktop/unknown platform — opening web URL");
    window.location.href = FLIPKART_URL;
}

// Auto-run on page load
window.onload = openFlipkartApp;
</script>
</body>
</html>
