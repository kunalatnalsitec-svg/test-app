<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Open Flipkart App</title>
<style>
body { font-family: system-ui, sans-serif; padding: 18px; }
#log { margin-top:12px; color:#333; white-space:pre-wrap; }
button { padding: 12px 20px; font-size:16px; margin-top:20px; }
</style>
<!-- Optional: Mimic Flipkart Smart App Banner meta -->
<meta name="apple-itunes-app" content="app-id=836619110, app-argument=https://www.flipkart.com/u-s-polo-assn-solid-men-neck-blue-t-shirt/p/itm7543be481a35d?q=us+polo+polo+tshirt+men&marketplace=FLIPKART&lid=LSTTSHGRQ65HGF6GMSNC6W7ZS&pid=TSHGRQ65HGF6GMSN&hl_lid=&_appId=MR&affid=lehlahstylefl&affExtParam1=fde73816-e4aa-4091-94e5-4802bf0d682f&store=clo/ash/ank/edy&_refId=">
</head>
<body>
<h3>Open Flipkart Product</h3>
<div id="log"></div>
<button id="openBtn">Open in Flipkart</button>

<script>
const FLIPKART_URL = "https://www.flipkart.com/u-s-polo-assn-solid-men-neck-blue-t-shirt/p/itm7543be481a35d?q=us+polo+polo+tshirt+men&marketplace=FLIPKART&lid=LSTTSHGRQ65HGF6GMSNC6W7ZS&pid=TSHGRQ65HGF6GMSN&hl_lid=&_appId=MR&affid=lehlahstylefl&affExtParam1=fde73816-e4aa-4091-94e5-4802bf0d682f&store=clo/ash/ank/edy&_refId=";
const logEl = document.getElementById('log');
function log(...args){ logEl.textContent += args.join(' ') + "\n"; console.log(...args); }

function isAndroid(){ return /Android/i.test(navigator.userAgent); }
function isIOS(){ return /iPhone|iPad|iPod/i.test(navigator.userAgent) && !window.MSStream; }
function isInstagram(){ return /Instagram/i.test(navigator.userAgent); }

function openFlipkartApp() {
    // Instagram on iOS: open Safari first
    if (isInstagram() && isIOS()) {
        log("Instagram iOS detected — opening Safari first...");
        const safariLink = document.createElement('a');
        safariLink.href = FLIPKART_URL;
        safariLink.target = "_blank";
        safariLink.click();
        log("Safari opened — user can now tap to open Flipkart app from there.");
        return;
    }

    // Android: use intent://
    if (isAndroid()) {
        log("Android: opening intent URI");
        const u = new URL(FLIPKART_URL);
        const hostPath = u.hostname + u.pathname + (u.search||'') + (u.hash||'');
        const fallback = encodeURIComponent(FLIPKART_URL);
        const intentUri = `intent://${hostPath}#Intent;scheme=https;package=com.flipkart.android;S.browser_fallback_url=${fallback};end`;
        window.location.href = intentUri;
        return;
    }

    // iOS Safari or other browsers: open universal link
    if (isIOS()) {
        log("iOS Safari: opening universal link");
        window.location.href = FLIPKART_URL;
        return;
    }

    // Desktop / unknown: fallback to web page
    log("Desktop/unknown platform — opening web URL");
    window.location.href = FLIPKART_URL;
}

// Button click
document.getElementById('openBtn').addEventListener('click', openFlipkartApp);

// Optional: auto-run on page load
window.onload = openFlipkartApp;
</script>
</body>
</html>
